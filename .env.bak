# .env

# SECURITY
# Set this to protect your Open Notebook instance with a password (for public hosting)
OPEN_NOTEBOOK_PASSWORD="mapleleaf123456"

# OPENAI
# OPENAI_API_KEY=


# ANTHROPIC
# ANTHROPIC_API_KEY=
mkdir -p logs




# 在第 20 行後加入
# Check and fix SURREAL_URL for local mode
if grep -q "ws://surrealdb" .env; then
    echo "⚠️  Detected Docker network URL, fixing for local mode..."
    sed -i.bak 's|ws://surrealdb/rpc:8000|ws://localhost/rpc:8000|g' .env
    echo "✅ Updated SURREAL_URL to ws://localhost/rpc:8000"
fi

# GEMINI
# this is the best model for long context and podcast generation
# GOOGLE_API_KEY=
# VERTEXAI
# VERTEX_PROJECT=my-google-cloud-project-name
# GOOGLE_APPLICATION_CREDENTIALS=./google-credentials.json
# VERTEX_LOCATION=us-east5

# MISTRAL
# MISTRAL_API_KEY=

# DEEPSEEK
# DEEPSEEK_API_KEY=

# OLLAMA
# OLLAMA_API_BASE="http://10.20.30.20:11434"

# OPEN ROUTER
# OPENROUTER_BASE_URL="https://openrouter.ai/api/v1"
# OPENROUTER_API_KEY=

# GROQ
# GROQ_API_KEY=

# XAI
# XAI_API_KEY=

# ELEVENLABS
# Used only by the podcast feature
# ELEVENLABS_API_KEY=

# VOYAGE AI
# VOYAGE_API_KEY=

# OPEN AI COMPATIBLE ENDPOINTS
# OPENAI_COMPATIBLE_BASE_URL=http://localhost:1234/v1
# OPENAI_COMPATIBLE_API_KEY=

# AZURE OPENAI
# AZURE_OPENAI_API_KEY=
# AZURE_OPENAI_ENDPOINT=
# Start Background Worker
echo ""
echo "⚙️  Starting Background Worker..."
if pgrep -f "surreal-commands-worker" > /dev/null; then
    echo "✅ Worker already running"
else
    echo "Starting worker in background..."
    uv run --env-file .env surreal-commands-worker --import-modules commands > logs/worker.log 2>&1 &
    WORKER_PID=$!
    echo $WORKER_PID > .worker.pid
    echo "✅ Worker started (PID: $WORKER_PID, logs: logs/worker.log)"
    sleep 2
fi
# AZURE_OPENAI_API_VERSION="2024-12-01-preview"
# AZURE_OPENAI_DEPLOYMENT_NAME=

# USE THIS IF YOU WANT TO DEBUG THE APP ON LANGSMITH
# LANGCHAIN_TRACING_V2=true
# LANGCHAIN_ENDPOINT="https://api.smith.langchain.com"
# LANGCHAIN_API_KEY=
# LANGCHAIN_PROJECT="Open Notebook"

# CONNECTION DETAILS FOR YOUR SURREAL DB
# New format (preferred) - WebSocket URL
SURREAL_URL="ws://surrealdb/rpc:8000"
SURREAL_USER="root"
SURREAL_PASSWORD="root"
SURREAL_NAMESPACE="open_notebook"
SURREAL_DATABASE="staging"

# OPEN_NOTEBOOK_PASSWORD=

# FIRECRAWL - Get a key at https://firecrawl.dev/
FIRECRAWL_API_KEY=

# JINA - Get a key at https://jina.ai/
JINA_API_KEY=